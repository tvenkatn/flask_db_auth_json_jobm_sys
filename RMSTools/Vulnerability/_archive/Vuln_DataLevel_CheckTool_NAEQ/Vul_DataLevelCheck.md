---
title: 'NAEQ Data Level Check '
author: "Executed By:- Geeta Nain"
date: "dated :-July 17th, 2016"
output:
  word_document: default
  pdf_document: default
  html_document: default
---

*Checked By-----*                                                      
*on Date----*



##  Vulnerability Data Level Check for NZEQ Model



```
## 
## This is Vulnerability Data Level Check for JPTY Model, which is performed on June 17, 2016
```

## 1. VCC Check 

```
## 
## VCC Completeness and Correctness check for NAEQ
## 1.1:-VCC have 548 ConstructionIds records, whereas number of ConstructionID per Scheme are as follows:-
```

```
##   ConstructionScheme Count_CCIds
## 1                ATC         113
## 2               FIRE          48
## 3           FIRE_AFM           7
## 4                ISO          57
## 5                RMS         104
## 6             RMS BR           7
## 7            RMS IND           8
## 8                UCC         204
```

```
## verify same with Vulnerability Modelers.
```

```
## 
##  Test 1.2 :- Check duplicity of ConstructionId per combination of ConstructionScheme and ConstructionCode  in VCC table.
```

```
## Pass:- No Construction record is duplicated per Scheme and code.
```

```
## 
##  Test 1.3:- Verify all Construction id are available globally.
```

```
## Pass:-All VCC records are globally valid.
```

```
## 
##  Test 1.4 :- Check VCC vs IMAP.
```

```
## Pass:-All IMAP records are correctly implemented in VCC table.
```
## 2. VOCC Check 

```
## 2.1:- Counting the number of occupancyID per Scheme:
```

```
## 
## VOCC Completeness and Correctness check for NAEQ
## 2.1:- VOCC have 6026 occupancyID records, whereas number of occupancyID per Scheme are as follows:-
```

```
##    OccupancyScheme num_OCCIds
## 1              AFM         32
## 2              ATC         51
## 3              IBC        782
## 4              ISO         10
## 5            NAICS       2513
## 6             NCCI       1385
## 7           RMS BR         83
## 8          RMS IND         51
## 9              SIC       1108
## 10           WCOCC         11
```

```
## verify same with Vulnerability Modelers.
```

```
## 
##  Test 2.2:- Check VOCC Duplicate Records.
```

```
## Pass:-No occupancy records are duplicated per Scheme.
```

```
## 
##  Test 2.3:- verify all occupancy id are available globally.
```

```
## Pass:-All VOCC records are valid.
```

```
## 
##  Test 2.4:- Check VOCC vs IMAP.
```

```
## Pass:-All IMAP records are in VOCC.
```

## 3.IMAP Check

```
## 
##  Test 3.1:- Check VCC vs IMAP.
```

```
## Fail:-Following are the extra records in VCC,
##                                               which are not present in IMAP table  0_63_-1_-1 0_53_-1_-1 0_64_-1_-1 0_65_-1_-1 0_66_-1_-1 0_67_-1_-1 0_68_-1_-1 0_69_-1_-1
```

```
## 
##  Test 3.2:- Check VOCC vs IMAP.
```

```
## Fail:- Following are the extra records in VOCC table indicated by INV_OCC, which are not present in IMAP table  2 13 24 35 46 57 68 79 84 3 4 5 6 7 8 9 10 11 12 14 15 16 17 18 19 20 21 22 23 25 26 27 28 29 30 31 32 33 34 36 37 38 39 40 41 42 43 44 45 47 48 49 50 51 52 53 54 55 56 58 59 60 61 62 63 64 65 66 67 69 70 71 72 73 74 75 76 77 78 80 81 82 83
```

```
## 
##  Test 3.3:- Check INV_KEY in IMAP table corresponding INV_Key in VGEO.
```

```
## Pass:-All Inv_key in VGEO are also present in IMAP table
```

```
## 
##   Test 3.4:- Check for multiple records in IMAP with unique combinations of various columns
```

```
## 
##  Manually verify that Unique key is actually unique in Updated IMAP Table, If Not, IMAP is not correct
```

```
## 
##   Test 3.5:- Check VINV vs IMAP.
```

```
## Pass:- All unique INV_RECNUM of VINV table are present in IMAP table.
```

```
## 
##   Test 3.6:- Check for unique ranges of Height 
##                 and year bands for all INV_OCC records
```

```
## some HT band range is not aplicable for all INV_OCC,Check HT_band.csv for unique ranges of Height, 
##                                                                                                        confirm with Modelers if there is any discontinuity
```

```
## some year band range is not aplicable for all INV_OCC, check YR_band .csv for unique ranges of Year bands, 
##                                                                                                                 confirm with Modelers if there is any discontinuity
```

## 4. VINV Check

```
## 
##  Test 4.1:- Check if INV_Recnum of VINV are present in IMAP
```

```
## Pass:- All the INV_RECNUM of IMAP table are available in VINV table.
```

```
## 
##  Test 4.2:- Check if sum of Def_Invpct more than 100% for each INV_RECNUM in VINV table
```

```
## Fail-some INV_RECNUM have invpct greater than 100 %, check .csv file named INV_over%.csv with Modelers
```

```
## 
##  Test 4.3:- Check if sum of Def_Invpct less than 100% for each INV_RECNUM in VINV table
```

```
## Pass- all INV_RECNUM have 100 % invpct.
```

```
## 
##   Records:- There are  0 records, which have INVPCT less than 100%,  Find detailed info on invpct in  INV_less100.csv
```

```
## 
##  Test 4.4:- Unique PDC number in VINV
```

```
## 
##  Records:- There are 8348 PDC_records, Find unique PDC_NUM in file named unique_pdc.csv
```

## 5. VGEO Check

```
## 
##  Test 5.1:- Check INV_KEY in IMAP table corresponding INV_Key in VGEO.
```

```
## Fail:- Following INV_Key of IMAP are present not present in VGEO:  -1
```

```
## 
##  Test 5.2 :- Check BI_key in VGEO vs VBI
```

```
## Pass:- All BI_key records are present in VGEO vs VBI table.
```

```
## 
##  Test 5.3:- Check 'DC_Key' in VGEO vs vFoF1 table.
```

## 6. VCV Check

```
## Test 6.1 :- To check if VCV table and IMAP table have the same CV_KEY.
```

```
## 
## a). Pass:-All the CV_KEY in the IMAP table are in VCV table.
```

```
## b).Fail:-Not all CV_KEY in IMAP table are in vcv table. The extra CV_KEY are:  16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16
```

```
## 
## Test 6.2:- To see if all the CV_Hazard values are no bigger than their corresponding CV_TOTAL values.
```

```
## Pass:-All the CV_TOTAL values are no less than their corresponding CV_HAZARD values in the vcv table.
```



## 7. VDC Check for all Shake

```
## 
##  Test 7.1:- check for Unique combinations of PDC, CGHSID, DCkey number in VDC
```

```
## 
##  Manually verify that Unique_key is actually unique in Updated_VulBIndexWI, Updated_VulBIndexSU, Updated_VulBIndexFL csv files inside Vuln_files folder, If yes then This test case is Pass, otherwise Fail
```

```
## 
##  Test 7.2:- unique 'CGHSId' info in vdc Wind
```

```
##    CGHS_ID    freq
## 1        1  337200
## 2        2  337200
## 3        3  337200
## 4        4  337200
## 5        5  337200
## 6        7 1053750
## 7        8 1053750
## 8        9 1053750
## 9       10 1053750
## 10      11 1053750
## 11      13  337200
## 12      14  337200
## 13      16 1022328
## 14      17 1022328
```

```
## 
##  Test 7.3:- check if unique 'CGHSId' in VDC Windtable are all available in CGHS table
```

```
## Pass:-All the CGHSID of vdc table are available in CGHS table.
```

```
## 
##  Test 7.4:- Check if count of 'CGHSId'  for PDC_NUM is same in vdc
```

```
## Pass:-Count of CGHSID for each PDC_NUM is same in Vdc Wind  table.
```

```
##     PDC_NUM       CGHScount
##  Min.   :   1   Min.   :2  
##  1st Qu.:2088   1st Qu.:2  
##  Median :4314   Median :2  
##  Mean   :4250   Mean   :2  
##  3rd Qu.:6401   3rd Qu.:2  
##  Max.   :8488   Max.   :2
```

```
## Pass for Wind:- All the PDC of VINV table are available in VDC WIND table.
```

```
## 
##  Test 7.7:-DC key completeness check in VDC as compared to VGEO Table.:
```

```
## Fail:Following DC_KEY of VGEO are not available in VDC for Wind subperil: 4 7 9 6 2 3 5 1 8 10
```

```
## Pass:- All the DC key of vdc Wind table are available in VGEO  WI table.
```


## 8.VHSR and CGHS Check

```
## 
##  Test 8.1:- All subperil's CGHS_ID of Structure coverage in CGHS table are available in VHSR table:
```

```
## Pass:-CGHSid of Coverage type 1 for all subperils  are available in vhsr table.
```

```
## 
##  Test 8.2:- All subperil's CGHS_ID of Structure coverage in CGHS table are available in VDS table:
```

```
## Pass:-CGHSid of Coverage type 1 for all subperils  are available in VDS table.
```

```
## numeric(0)
```

## 9. BI Data Check 

```
## 9.1:- BI Key consistancy check:
```

```
## 9.1.1:- BI Key consistancy in VBI from VGEO table:
```

```
## Pass:-All BI_KEY are correctly implemented in VBI table.
```

```
## 9.1.3:- BI Key consistancy in VBIMOD from VGEO table:
```

```
## Pass:-All BI_KEY are correctly implemented in VBIMOD table.
```

```
## 9.2:- BI OCC consistancy check:
```

```
## 9.1.1:- BI OCC consistancy in VBI from VOCC table:
```

```
## Pass:-All BI_OCC are correctly implemented in VBI table.
```

```
## 9.1.3:- BI Key consistancy in VBIMOD from VGEO table:
```

```
## Info:-The following BI_OCC of VGEO table are not available in VBIMOD table:  66 67 68 69 70 71 72 73 74 75 76 77 78 79
```

## 9. Sec Modif Data Check 

```
## 10.1:- Checking Sec modif per Damage stateId in VBI vs VBIMOD table :
```

```
## Info:-The following DSTATEID of VBI table are not assigned with any Modif_NUM in VBIMOD table:  1 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28
```

```
## 10.2:- Checking  modif_Num consistancy in Mdsc from vbimod :
```

```
## Pass:-All MODIF_NUM are are available in MDSC table.
```

```
## 10.3:- Checking  modif_Num consistancy in odsc from mdsc :
```

```
## Pass:-All MODIF_NUM of MDSC are available in ODSC table.
```

```
## 10.4:- Checking consistancy of modif_Num and Option_Num combination in odsc from vbimod :
```

```
## Pass:-All combination of MODIF_NUM  with OPTION_NUM  in VBIMOD table are available in ODSC table.
```

```
## [1] "Finished Vulnerability Data level check"
```

```
## Time difference of 5.164616 mins
```

